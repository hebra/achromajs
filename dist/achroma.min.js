/*! AchromaJS - v15.4.1 - 2015-04-07
* Copyright (c) 2015 Hendrik Brandt; Licensed Apache, CC-BY-SA */
document.addEventListener("DOMContentLoaded",function(a){console.log("Check if achromajs is enabled via URL or cookie."),achromajs.isEnabled()&&(console.log("Injecting achromajs into DOM."),achromajs.inject(),achromajs.webkitSvgPathFix(),achromajs.restoreFilter())});var achromajs=window.achromajs||{};achromajs.localConfig={enabled:!1,filter:"",variant:"",save:function(){document.cookie="achromajs="+JSON.stringify(this)+"; expires=Thu, 31 Dec 2099 12:00:00 UTC; path=/"},load:function(){var a=document.cookie.replace(/(?:(?:^|.*;\s*)achromajs\s*\=\s*([^;]*).*$)|^.*$/,"$1");if(""!=a){var b=JSON.parse(a);this.enabled=b.enabled,this.filter=b.filter,this.variant=b.variant}}},achromajs.blindnessModes={achromato:{Achromatomaly:"Lacking most color vision",Achromatopsia:"Lacking all color vision (aka color blind)"},prot:{Protanomaly:"poor red-green hue discrimination",Protanopia:"red appears dark"},deuter:{Deuteranomaly:"lightly red-green hue discrimination",Deuteranopia:"moderate red-green hue discrimination"},tritan:{Tritanomaly:"Low blue-yellow hue discrimination",Tritanopia:"Absence of blue retinal receptors"}},achromajs.contrastModes={blur:{"blur-1":"1 pixel blur","blur-2":"2 pixels blur","blur-3":"3 pixels blur"},lowcontrast:{lowcontrast:"Laptop or mobile in sunlight"},highcontrast:{highcontrast:"Just black and white colors"},invert:{invert:"Invert colors"}},achromajs.inject=function(){document.documentElement.className+="ontouchstart"in document.documentElement?" achromajs-touch":"",achromajs.localConfig.load(),Array.prototype.slice.call(document.body.childNodes,0).forEach(function(a){"#text"!=a.nodeName&&"#comment"!=a.nodeName&&a.setAttribute("data-achromajs",achromajs.localConfig.variant)});var a=document.createElement("div");a.setAttribute("id","ACHROMAJS_CONTAINER");var b=document.createElement("ul");Object.keys(achromajs.contrastModes).forEach(function(a){var c=document.createElement("li");c.setAttribute("data-achromajs-modus",a),c.addEventListener("click",achromajs.setMode),b.appendChild(c)});var c=document.createElement("ul");Object.keys(achromajs.blindnessModes).forEach(function(a){var b=document.createElement("li");b.setAttribute("data-achromajs-modus",a),b.addEventListener("click",achromajs.setMode),c.appendChild(b)}),a.appendChild(b),a.appendChild(document.createElement("span")),a.appendChild(c);var d=document.createElement("div");d.setAttribute("id","ACHROMAJS_WRAPPER"),d.appendChild(a),document.body.appendChild(d);var e=document.createElement("style");if(e.setAttribute("id","achromajs_BODY_CSS"),e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),window.getComputedStyle){var f=window.getComputedStyle(document.body,null),g=["background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size"];e.innerHTML="body:before{",g.forEach(function(a){e.innerHTML+=a+": "+f.getPropertyValue(a)+";\n"}),e.innerHTML+="}"}document.body.appendChild(e)},achromajs.clearNodeClasses=function(){[].forEach.call(document.querySelectorAll("[data-achromajs]"),function(a){Object.keys(achromajs.blindnessModes).forEach(function(b){Object.keys(achromajs.blindnessModes[b]).forEach(function(b){a.classList.remove("achromajs-"+b),document.body.classList.remove("achromajs-"+b+"-Body")})}),Object.keys(achromajs.contrastModes).forEach(function(b){Object.keys(achromajs.contrastModes[b]).forEach(function(b){a.classList.remove("achromajs-"+b),document.body.classList.remove("achromajs-"+b+"-Body")})})})},achromajs.setMode=function(a,b,c){var d=b;if(null!=a){var e=a.target;d=e.getAttribute("data-achromajs-modus")}var f=Object.keys(achromajs.contrastModes[d]||achromajs.blindnessModes[d]||{});if(0!=f.length){achromajs.clearNodeClasses();var g="";[].forEach.call(document.querySelectorAll("[data-achromajs]"),function(a){var b=a.getAttribute("data-achromajs"),e=-1;f.forEach(function(a,d){a==b&&(e=void 0==c?d:d-1)}),e<f.length-1?(g=f[e+1],a.classList.add("achromajs-"+g),a.setAttribute("data-achromajs",g)):(a.setAttribute("data-achromajs",""),d=null)}),document.body.classList.add("achromajs-"+g+"-Body"),achromajs.localConfig.filter=d,achromajs.localConfig.variant=g,achromajs.localConfig.save()}},achromajs.restoreFilter=function(){achromajs.setMode(null,achromajs.localConfig.filter,achromajs.localConfig.variant)},achromajs.isEnabled=function(){var a=window.location.search.substring(1)?JSON.parse('{"'+window.location.search.substring(1).replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(a,b){return""===a?b:decodeURIComponent(b)}):{};return achromajs.localConfig.load(),a.achromajs&&(achromajs.localConfig.enabled="enable"==a.achromajs,achromajs.localConfig.save()),achromajs.localConfig.enabled};var achromajs=window.achromajs||{};achromajs.webkitSvgPathFix=function(){if(navigator.userAgent.toLowerCase().indexOf("webkit")>0){console.log("Adding workaround for Webkit/Blink issues #463119 and #405315");var a=document.querySelector("link[href*='achroma']");if(!a)return void console.error("AchromaJS CSS link not found in DOM.");var b=a.href.replace(/achroma([\.min]*)\.css$/g,""),c=document.createElement("style");c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.innerHTML+=".achromajs-Achromatomaly, body.achromajs-Achromatomaly-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Achromatomaly);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Achromatomaly);}",c.innerHTML+=".achromajs-Achromatopsia, body.achromajs-Achromatopsia-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Achromatopsia);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Achromatopsia);}",c.innerHTML+=".achromajs-Protanomaly, body.achromajs-Protanomaly-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Protanomaly);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Protanomaly);}",c.innerHTML+=".achromajs-Protanopia, body.achromajs-Protanopia-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Protanopia);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Protanopia);}",c.innerHTML+=".achromajs-Deuteranomaly, body.achromajs-Deuteranomaly-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Deuteranomaly);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Deuteranomaly);}",c.innerHTML+=".achromajs-Deuteranopia, body.achromajs-Deuteranopia-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Deuteranopia);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Deuteranopia);}",c.innerHTML+=".achromajs-Tritanomaly, body.achromajs-Tritanomaly-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Tritanomaly);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Tritanomaly);}",c.innerHTML+=".achromajs-Tritanopia, body.achromajs-Tritanopia-Body:before {",c.innerHTML+="filter: url("+b+"color-filters.svg#Tritanopia);",c.innerHTML+="-webkit-filter: url("+b+"color-filters.svg#Tritanopia);}",document.body.appendChild(c)}};